<!doctype html>
<html lang="en">
    <head>    

        <title><p>The <em>Projects </em>folder</p> - TRACMASS Theme</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content=""/>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="../../../assets/css/main.css">
        
        
        
    </head>
    <body class="palette-navy">
        
        <div id="page" class="site">
  <header id="masthead" class="site-header outer">
  <div class="inner">
    <div class="site-header-inside">
      <div class="site-branding">
        
        
        <p class="site-logo"><a href="../../../index.html"><img src="../../../images/headers_footer/fig_tracmass.png" alt="TRACMASS logo" /></a></p>
        
      </div><!-- .site-branding -->
      
      
      <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
        <div class="site-nav-inside">
          <button id="menu-close" class="menu-toggle"><span class="screen-reader-text">Open Menu</span><span class="icon-close" aria-hidden="true"></span></button>
          <ul class="menu">
          
            
            
            <li class="menu-item">
              
              
<a href="../../../index.html"
  
  
  class="">
  
    Home
  
</a>

              
            </li>
          
            
            
            <li class="menu-item">
              
              
<a href="../../../docs.html"
  
  
  class="">
  
    Documentation
  
</a>

              
            </li>
          
            
            
            <li class="menu-item has-children">
              
              
<a href="../../../index.html"
  
  
  class="">
  
    Publications & Examples
  
</a>

              
                <button class="submenu-toggle"><span class="icon-angle-right" aria-hidden="true"></span><span class="screen-reader-text">Sub-menu</span></button>
                
                
<ul class="submenu">

  
  
  <li class="menu-item">
    
    
<a href="../../../publications.html"
  
  
  class="">
  
    Publications
  
</a>

  </li>

  
  
  <li class="menu-item">
    
    
<a href="../../../examples.html"
  
  
  class="">
  
    Example Gallery
  
</a>

  </li>

</ul>

              
            </li>
          
            
            
            <li class="menu-item">
              
              
<a href="../../../contact.html"
  
  
  class="">
  
    Contact & FAQ
  
</a>

              
            </li>
          
            
            
            <li class="menu-item">
              
              
<a href="../../../news.html"
  
  
  class="">
  
    News
  
</a>

              
            </li>
          
            
            
            <li class="menu-item menu-button">
              
              
<a href="https://github.com/TRACMASS/tracmass"
  
  
  class="button button-icon">
  
    
    
<svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
  
  <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>
  
</svg>

    <span class="screen-reader-text">GitHub</span>
  
</a>

              
            </li>
          
          </ul>
        </div><!-- .site-nav-inside -->
      </nav><!-- .site-navigation -->
      <button id="menu-open" class="menu-toggle"><span class="screen-reader-text">Close Menu</span><span class="icon-menu" aria-hidden="true"></span></button>
      
    </div><!-- .site-header-inside -->
  </div><!-- .inner -->
</header><!-- .site-header -->

  <main id="content" class="site-content">
    <div class="inner outer">
  <div class="docs-content">
    
    




<nav id="docs-nav" class="docs-nav">
  <div id="docs-nav-inside" class="docs-nav-inside sticky">
    <button id="docs-nav-toggle" class="docs-nav-toggle">Navigate Docs<span class="icon-angle-right" aria-hidden="true"></span></button>
    <div class="docs-nav-menu">
      <ul id="docs-menu" class="docs-menu">
        <li class="docs-menu-item">
          <a href="../../../docs.html">Welcome to TRACMASS' documentation</a>
        </li>
        
          
          
          
          
          
          
          
          <li class="docs-menu-item">
            <a href="../../about/index.html">About</a>
            
            
          </li>
        
          
          
          
          
          
          
          
          <li class="docs-menu-item has-children">
            <a href="../../configuration/index.html">Configuration</a>
            
            
              <button class="docs-submenu-toggle"><span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span></button>
              
              


<ul class="docs-submenu">
  
    <li class="docs-menu-item">
      <a href="../../configuration/installation/index.html">Installation</a>
    </li>
  
    <li class="docs-menu-item">
      <a href="../../configuration/quick-start.html">How to set an experiment</a>
    </li>
  
</ul>

            
          </li>
        
          
          
          
          
          
          
          
          <li class="docs-menu-item has-children active">
            <a href="../index.html">TRACMASS Components</a>
            
            
              <button class="docs-submenu-toggle"><span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span></button>
              
              


<ul class="docs-submenu">
  
    <li class="docs-menu-item">
      <a href="../main_program/index.html">Main program</a>
    </li>
  
    <li class="docs-menu-item">
      <a href="../main_modules/index.html">Main modules</a>
    </li>
  
    <li class="docs-menu-item">
      <a href="../namelist/index.html"><p>Namelist</p></a>
    </li>
  
    <li class="docs-menu-item current">
      <a href="index.html"><p>The <em>Projects </em>folder</p></a>
    </li>
  
</ul>

            
          </li>
        
          
          
          
          
          
          
          
          <li class="docs-menu-item">
            <a href="../../output/index.html">TRACMASS output</a>
            
            
          </li>
        
          
          
          
          
          
          
          
          <li class="docs-menu-item has-children">
            <a href="../../tools/index.html">Tools</a>
            
            
              <button class="docs-submenu-toggle"><span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span></button>
              
              


<ul class="docs-submenu">
  
    <li class="docs-menu-item">
      <a href="../../tools/insitu/index.html"><em>In situ</em>  postprocessing</a>
    </li>
  
    <li class="docs-menu-item">
      <a href="../../tools/pytraj/index.html">pyTRAJ</a>
    </li>
  
</ul>

            
          </li>
        
          
          
          
          
          
          
          
          <li class="docs-menu-item">
            <a href="../../references/index.html">References</a>
            
            
          </li>
        
      </ul><!-- .docs-menu -->
    </div><!-- .docs-nav-menu -->
  </div><!-- .docs-nav-inside -->
</nav><!-- .docs-nav -->

    <article class="post type-docs">
      <div class="post-inside">
        <header class="post-header">
          <h1 class="post-title line-left"><p>The <em>Projects </em>folder</p></h1>
        </header><!-- .post-header -->
        <div class="post-content">
          <p>The present chapter will introduce all the files in the <em>projects</em> folder. Currently four projects are available: <strong>Theoretical, NEMO, AVISO, IFS, ROMS</strong>.</p>

<hr />
<h2 id="setup_gridf90">setup_grid.F90</h2>
<p>This subroutine defines all the variables linked to the grid such as the horizontal resolution or the grid area. The following variables are initialised in this subroutine:</p>

<ul>
  <li>
    <p><strong>dxdy</strong> [<em>mandatory</em>]: the area of horizontal cell-walls.</p>
  </li>
  <li>
    <p><strong>dxv</strong>:  size of the zonal wall computed in V points.</p>
  </li>
  <li>
    <p><strong>dyu</strong>:  size of the meridional wall computed in U points.</p>
  </li>
  <li>
    <p><strong>kmt</strong>: number of vertical level from surface to bottom topography.</p>
  </li>
  <li>
    <p><strong>dzu</strong>: size of the vertical wall computed in U points.</p>
  </li>
  <li>
    <p><strong>dzv</strong>: size of the vertical wall computed in V points.</p>
  </li>
  <li>
    <p><strong>dzt</strong> [<em>mandatory</em>]: size of the vertical wall computed in T points.</p>
  </li>
</ul>

<div class="note">
  &#9888; <strong>Warning:</strong> <br />
    <strong>dzt</strong> is a mandatory variable that needs to be defined either in <strong>setup_grid.F90</strong> or in <strong>read_field.F90</strong>.
</div>
<hr />
<h2 id="read_fieldf90">read_field.F90</h2>
<p>This subroutine reads velocities and optionally some tracers from netCDF files and computes the mass/volume fluxes for TRACMASS.</p>

<p>There are two kind of variables that are stored at different time steps: 2-step variables and 3-step variables:</p>

<ul>
  <li>The 2-step variables are those used to compute the time interpolation in between two time steps. These variables include all the mass/volume fluxes, tracer values, grid mass/volume tendecies, or scale factors. These variables have two time steps that represent: the “previous” time step (1) and the “current” time step (2). The data is read and stored in index <strong>2</strong>, in the following time step the subroutine <strong>swap_time</strong> will reassign the former “current” time step into the new “previous” time step.</li>
</ul>

<p align="center">
  <img width="100%" src="../../../images/fig_swap_1.png" />
</p>

<ul>
  <li>The 3-step variables are those used to compute the mass/volume change <strong>dzdt</strong>. These variables include the size of the vertical grid <strong>dzt</strong>, surface boundary <strong>hs</strong>, or the tracer value <strong>tracertraj</strong>. These variables have there time steps that represent: the “previous” time step (-1), the “current” time step (0), and the “next” time step (1). The data is read and stored in index <strong>1</strong>, in the following time step the subroutine <strong>swap_time</strong> will reassign the former “current” time step into the new “previous” time step, and the former “next” into the new “current” time step. In the first iteration of TRACMASS (<strong>ints</strong> equals to zero) the three time steps are read.</li>
</ul>

<p align="center">
  <img width="100%" src="../../../images/fig_swap_2.png" />
</p>

<p>The following variables are initialised in this subroutine:</p>

<ul>
  <li>
    <p><strong>uflux</strong> [<em>mandatory</em>, 2-step variable]: zonal volume/mass flux.</p>
  </li>
  <li>
    <p><strong>vflux</strong> [<em>mandatory</em>, 2-step variable]: meridional volume/mass flux.</p>
  </li>
  <li>
    <p><strong>dzt</strong> [<em>mandatory</em>, see warning in <strong>setup_grid</strong>, 3-step variable]: size of the vertical wall computed in T points.</p>
  </li>
  <li>
    <p><strong>dzdt</strong> [2-step variable]: time derivate of the vertical grid.</p>
  </li>
  <li>
    <p><strong>tracers(:)%data</strong> [2-step variable] and <strong>tracertraj</strong> [3-step variable]: tracer values if <strong>l_tracers</strong> is <strong>TRUE</strong>.</p>
  </li>
</ul>

<hr />
<h2 id="kill_zonesf90">kill_zones.F90</h2>
<p>This subroutine defines the limits of the domain. If a trajectory is outside the domain the subroutine will identify it with a flag (<strong>nend</strong>). <strong>nend</strong> = 0 is reserved to the time exceeding case and <strong>nend</strong> = 1 is reserved to the trajectories reach the surface (<strong>z1</strong> == <strong>km</strong>).</p>

<p>There are four types of killing zones defined by <strong>exitType</strong> :</p>

<p align="center">
  <img width="100%" src="../../../images/fig_kzone.png" />
</p>

<ul>
  <li>
    <p><strong>exitType=1</strong> : killing zone defined by a geographical domain given by [ <strong>iene, ienw</strong> ]x[ <strong>jens, jenn</strong> ]. If a trajectory is within those indexes it will be terminated.</p>
  </li>
  <li>
    <p><strong>exitType=2</strong> : killing zone defined by a tracer value <strong>tracere</strong>. If <strong>maxormin</strong> = 1 (-1) the isoline is the maximum (minimum) value of the tracer.</p>
  </li>
  <li>
    <p><strong>exitType=3</strong> : killing zone defined by both a geographical domain and tracer isolines.</p>
  </li>
  <li>
    <p><strong>exitType=4</strong> : the killing zone is hard coded by the user.</p>
  </li>
</ul>

<hr />
<h2 id="makefileprj">Makefile.prj</h2>
<p>This makefile sets the chosen pre-processing options. Before compiling the main program make sure to check the pre-processing options.</p>

<p>This is a list of the current pre-processing options:</p>

<table>
  <thead>
    <tr>
      <th>Compilation flag</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>time_analytical</strong></td>
      <td>Turn on time analytical scheme</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><strong>w_2dim</strong></td>
      <td>Turn off vertical fluxes</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><strong>w_3dim</strong></td>
      <td>Compute 3D vertical velocities</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><strong>w_explicit</strong></td>
      <td>Read 3D vertical velocities from input files</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><strong>no_netcdf</strong></td>
      <td>Run TRACMASS without netcdf libraries</td>
    </tr>
  </tbody>
  <tbody>
    <tr>
      <td><strong>A_grid</strong></td>
      <td>Original dataset on a A grid</td>
    </tr>
  </tbody>
</table>

<hr />
<h2 id="namelist">Namelist</h2>
<p>Many variables at TRACMASS can be modified using the namelist without the need to recompile the program. Each project has a <em>namelist_CASE.in</em> in the project folder. When TRACMASS is compiled a copy of the namelist (<em>namelist.in</em>) can be found in the main TRACMASS directory.</p>

<p>The list of all the variables that can be changed in the namelist and their corresponding group can be found in the section <a href="../namelist/index.html"><em>Namelist</em></a>.</p>

          
          
          
            
            
            
            
            
          
        </div><!-- .post-content -->
      </div><!-- .post-inside -->
    </article><!-- .post -->
    <nav id="page-nav" class="page-nav">
      <div id="page-nav-inside" class="page-nav-inside sticky">
        <h2 class="page-nav-title">Jump to Section</h2>
        <div id="page-nav-link-container"></div>
      </div><!-- .page-nav-inside -->
    </nav><!-- .page-nav -->
  </div><!-- .docs-content -->
</div><!-- .inner-->

  </main><!-- .site-content -->
  <footer id="colophon" class="site-footer outer">
  <div class="inner">
    <div class="site-footer-inside">
      <p class="site-info">
        
        
        <span class="copyright">&copy; Stackbit. All rights reserved. This Jamstack site was originally created by Stackbit and modified by the TRACMASS team.</span>
        
        
      </p><!-- .site-info -->
      
      
      <div class="social-links">
        
      </div><!-- .social-links -->
      
    </div><!-- .site-footer-inside -->
  </div><!-- .inner -->
</footer><!-- .site-footer -->

</div><!-- .site -->

        <!-- Scripts -->
        <script src="../../../assets/js/plugins.js"></script>
        <script src="../../../assets/js/main.js"></script>
        <script src="../../../assets/js/page-load.js"></script>
    </body> 
</html>
