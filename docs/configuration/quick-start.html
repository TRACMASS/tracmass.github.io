<!doctype html>
<html lang="en">
    <head>

        <title>How to set an experiment</title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content=""/>
        <link rel="preconnect" href="https://fonts.gstatic.com">
        <link href="https://fonts.googleapis.com/css2?family=Lato:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="../../assets/css/main.css">
        <link rel="shortcut icon" href="../../images/headers_footer/favicon.ico" type="image/x-icon">
        <link rel="icon" href="../../images/headers_footer/favicon.ico" type="image/x-icon">

    </head>
    <body class="palette-navy">

        <div id="page" class="site">
  <header id="masthead" class="site-header outer">
  <div class="inner">
    <div class="site-header-inside">
      <div class="site-branding">


        <p class="site-logo"><a href="../../index.html"><img src="../../images/headers_footer/fig_tracmass.png" alt="TRACMASS logo" /></a></p>

      </div><!-- .site-branding -->


      <nav id="main-navigation" class="site-navigation" aria-label="Main Navigation">
        <div class="site-nav-inside">
          <button id="menu-close" class="menu-toggle"><span class="screen-reader-text">Open Menu</span><span class="icon-close" aria-hidden="true"></span></button>
          <ul class="menu">



            <li class="menu-item">


<a href="../../index.html"


  class="">

    Home

</a>


            </li>



            <li class="menu-item">


<a href="../../docs.html"


  class="">

    Documentation

</a>


            </li>



            <li class="menu-item has-children">


<a href="../../index.html"


  class="">

    Publications & Examples

</a>


                <button class="submenu-toggle"><span class="icon-angle-right" aria-hidden="true"></span><span class="screen-reader-text">Sub-menu</span></button>


<ul class="submenu">



  <li class="menu-item">


<a href="../../publications.html"


  class="">

    Publications

</a>

  </li>



  <li class="menu-item">


<a href="../../examples.html"


  class="">

    Example Gallery

</a>

  </li>

</ul>


            </li>



            <li class="menu-item">


<a href="../../contact.html"


  class="">

    Contact & FAQ

</a>


            </li>



            <li class="menu-item">


<a href="../../news.html"


  class="">

    News

</a>


            </li>



            <li class="menu-item menu-button">


<a href="https://github.com/TRACMASS/tracmass"


  class="button button-icon">



<svg class="icon" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">

  <path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/>

</svg>

    <span class="screen-reader-text">GitHub</span>

</a>


            </li>

          </ul>
        </div><!-- .site-nav-inside -->
      </nav><!-- .site-navigation -->
      <button id="menu-open" class="menu-toggle"><span class="screen-reader-text">Close Menu</span><span class="icon-menu" aria-hidden="true"></span></button>

    </div><!-- .site-header-inside -->
  </div><!-- .inner -->
</header><!-- .site-header -->

  <main id="content" class="site-content">
    <div class="inner outer">
  <div class="docs-content">






<nav id="docs-nav" class="docs-nav">
  <div id="docs-nav-inside" class="docs-nav-inside sticky">
    <button id="docs-nav-toggle" class="docs-nav-toggle">Navigate Docs<span class="icon-angle-right" aria-hidden="true"></span></button>
    <div class="docs-nav-menu">
      <ul id="docs-menu" class="docs-menu">
        <li class="docs-menu-item">
          <a href="../../docs.html">Welcome to TRACMASS' documentation</a>
        </li>








          <li class="docs-menu-item">
            <a href="../about/index.html">About</a>


          </li>








          <li class="docs-menu-item has-children active">
            <a href="index.html">Configuration</a>


              <button class="docs-submenu-toggle"><span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span></button>




<ul class="docs-submenu">

    <li class="docs-menu-item">
      <a href="installation/index.html">Installation</a>
    </li>

    <li class="docs-menu-item current">
      <a href="quick-start.html">How to set an experiment</a>
    </li>

</ul>


          </li>








          <li class="docs-menu-item has-children">
            <a href="../components/index.html">TRACMASS Components</a>


              <button class="docs-submenu-toggle"><span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span></button>




<ul class="docs-submenu">

    <li class="docs-menu-item">
      <a href="../components/main_program/index.html">Main program</a>
    </li>

    <li class="docs-menu-item">
      <a href="../components/main_modules/index.html">Main modules</a>
    </li>

    <li class="docs-menu-item">
      <a href="../components/namelist/index.html"><p>Namelist</p></a>
    </li>

    <li class="docs-menu-item">
      <a href="../components/project/index.html"><p>The <em>Projects </em>folder</p></a>
    </li>

</ul>


          </li>








          <li class="docs-menu-item">
            <a href="../output/index.html">TRACMASS output</a>


          </li>








          <li class="docs-menu-item has-children">
            <a href="../tools/index.html">Tools</a>


              <button class="docs-submenu-toggle"><span class="screen-reader-text">Submenu</span><span class="icon-angle-right" aria-hidden="true"></span></button>




<ul class="docs-submenu">

    <li class="docs-menu-item">
      <a href="../tools/insitu/index.html"><em>In situ</em>  postprocessing</a>
    </li>

    <li class="docs-menu-item">
      <a href="../tools/pytraj/index.html">pyTRAJ</a>
    </li>

</ul>


          </li>








          <li class="docs-menu-item">
            <a href="../references/index.html">References</a>


          </li>

      </ul><!-- .docs-menu -->
    </div><!-- .docs-nav-menu -->
  </div><!-- .docs-nav-inside -->
</nav><!-- .docs-nav -->

    <article class="post type-docs">
      <div class="post-inside">
        <header class="post-header">
          <h1 class="post-title line-left">How to set an experiment</h1>
        </header><!-- .post-header -->
        <div class="post-content">
          <p>We recommend testing that TRACMASS was properly compiled by letting PROJECT and CASE be <strong>“Theoretical”</strong> in the <em>Makefile</em> (which is the default). In this case, TRACMASS will use a simple oscillating velocity field to trace trajectories.</p>

<ol>
  <li>
    <p>Make sure in <em>Makefile</em> both PROJECT and CASE are set to Theoretical.</p>
  </li>
  <li>
    <p>Recompile the code</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   make clean
   make
</code></pre></div>    </div>
  </li>
  <li>
    <p>Run the code by typing</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>   ./runtracmass
</code></pre></div>    </div>
  </li>
  <li>
    <p>If everything went without an error, you will get the following output in the terminal:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
 ===============================================================================
              TRACMASS Lagrangian off-line particle tracking
 ===============================================================================

 Start date  : 2020-06-30
 Start time  : 20:57:55
 -------------------------------------------------------------------------------

 Model information:
 Project code  : Theoretical
 Case name     : Theoretical
 Namelist file : projects/Theoretical/namelist_Theoretical.in
 -------------------------------------------------------------------------------

 Output information:
 Directory for output files : /Users/user/Tracmass_output
 Prefix for output files    : test
 -------------------------------------------------------------------------------

 Configuration options:
  - Two-dimensional trajectories, no change in depth
 -------------------------------------------------------------------------------

 Start date in model-time     : 2000-01-01 12:00
 End date in model-time       : 2000-01-01 21:00
 Length of run in timesteps   :     10
 Number of seeding timesteps  :      1
 Steps between two GCM fields :    100

 -------------------------------------------------------------------------------
 t-step        run        out        err        tot                 model date
 -------------------------------------------------------------------------------
      1 |        1 |        0 |        0 |        1 |   2000-01-01    12:00:00
      2 |        1 |        0 |        0 |        1 |   2000-01-01    13:00:00
      3 |        1 |        0 |        0 |        1 |   2000-01-01    14:00:00
      4 |        1 |        0 |        0 |        1 |   2000-01-01    15:00:00
      5 |        1 |        0 |        0 |        1 |   2000-01-01    16:00:00
      6 |        1 |        0 |        0 |        1 |   2000-01-01    17:00:00
      7 |        1 |        0 |        0 |        1 |   2000-01-01    18:00:00
      8 |        1 |        0 |        0 |        1 |   2000-01-01    19:00:00
      9 |        1 |        0 |        0 |        1 |   2000-01-01    20:00:00
     10 |        1 |        0 |        0 |        1 |   2000-01-01    21:00:00
 ===============================================================================
           1  particles calculated
           0  particles exited the space and time domain
           0  particles flagged with errors
           1  particles in domain
 -------------------------------------------------------------------------------

 ===============================================================================
 End date  : 2020-06-30
 End time  : 20:57:55
 ===============================================================================
</code></pre></div>    </div>
  </li>
  <li>
    <p>You can rerun the code by modifying the <em>namelist.in</em> in the main directory.</p>
  </li>
</ol>

<hr />
<h2 id="how-to-configure-a-customised-experiment">How to configure a customised experiment</h2>
<p>This is a basic guidance on how to implement a new setup from a GCM with a grid that does not exist in the present <strong>TRACMASS</strong> projects list. This requires good knowledge in the numerical discretisation of your GCM and of Fortran programming.</p>

<ol>
  <li>
    <p>Make a new <em>«project»</em> which we call “mymodel” here.</p>

    <p>Copy the directory from an existing project that has a similar grid (A,B or C-grid) or has a similar format (netcdf, grib, etc.). So that:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cd projects
 cp -r NEMO mymodel
</code></pre></div>    </div>

    <p>or:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cp -r AVISO mymodel
</code></pre></div>    </div>

    <p>or:</p>

    <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code> cp -r IFS mymodel
</code></pre></div>    </div>
  </li>
  <li>
    <p>Rename the namelist file to <em>namelist_mymodel.in</em> or <em>namelist_mycase.in</em> if you are using a case within the project. Find more information about the <em>namelist</em> <a href="../components/namelist/index.html">here</a>.</p>
  </li>
  <li>
    <p>Modify and adapt the files under <em>/projects/mymodel</em>, which are <em>setup_grid.F90</em>, <em>read_field.F90</em>, and <em>kill_zones.F90</em>. Find more information about the subroutines <em>setup_grid.F90</em> and <em>read_field.F90</em> <a href="../components/project/index.html">here</a>.</p>
  </li>
  <li>
    <p>Adapt the <em>Makefile.prj</em> to adjust the compiling flags. The list of possible flags can be found <a href="../components/project/index.html#makefileprj">here</a>.</p>
  </li>
  <li>
    <p>Adapt the <em>Makefile</em> in the main directory and set PROJECT = mymodel and CASE = mymodel.</p>
  </li>
</ol>










        </div><!-- .post-content -->
      </div><!-- .post-inside -->
    </article><!-- .post -->
    <nav id="page-nav" class="page-nav">
      <div id="page-nav-inside" class="page-nav-inside sticky">
        <h2 class="page-nav-title">Jump to Section</h2>
        <div id="page-nav-link-container"></div>
      </div><!-- .page-nav-inside -->
    </nav><!-- .page-nav -->
  </div><!-- .docs-content -->
</div><!-- .inner-->

  </main><!-- .site-content -->
  <footer id="colophon" class="site-footer outer">
  <div class="inner">
    <div class="site-footer-inside">
      <p class="site-info">


        <span class="copyright">&copy; Stackbit. All rights reserved. This Jamstack site was originally created by Stackbit and modified by the TRACMASS team.</span>


      </p><!-- .site-info -->


      <div class="social-links">

      </div><!-- .social-links -->

    </div><!-- .site-footer-inside -->
  </div><!-- .inner -->
</footer><!-- .site-footer -->

</div><!-- .site -->

        <!-- Scripts -->
        <script src="../../assets/js/plugins.js"></script>
        <script src="../../assets/js/main.js"></script>
        <script src="../../assets/js/page-load.js"></script>
    </body>
</html>
